(()=>{"use strict";const e=window.React,t=window.wp.hooks,n=window.wp.blockEditor,a=window.wp.components,l=window.wp.i18n,r=window.wp.compose;function i(t){const{attributes:{pattern_friend_hide_on_mobile:n,pattern_friend_hide_on_tablet:r,pattern_friend_hide_on_computer:i},setAttributes:o}=t;return(0,e.createElement)(a.PanelBody,{title:(0,l.__)("Device Visibility")},(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.ToggleControl,{label:(0,l.__)("Hide on mobile"),checked:n,onChange:()=>o({pattern_friend_hide_on_mobile:!n})})),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.ToggleControl,{label:(0,l.__)("Hide on tablet"),checked:r,onChange:()=>o({pattern_friend_hide_on_tablet:!r})})),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.ToggleControl,{label:(0,l.__)("Hide on computer"),checked:i,onChange:()=>o({pattern_friend_hide_on_computer:!i})})),n&&r&&i&&(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.Notice,{status:"warning",isDismissible:!1},"You're hiding the block on all devices.")))}function o(t){const{attributes:{pattern_friend_hidable_group:n,pattern_friend_id:r},setAttributes:i}=t;return(0,e.createElement)(a.PanelBody,{title:(0,l.__)("Hidable Settings")},(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.ToggleControl,{label:(0,l.__)("Make Hidable"),help:(0,l.__)("Make this element hidable (requires an child button marked as a closing button)."),checked:n,onChange:()=>i({pattern_friend_hidable_group:!n})})),n&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.__experimentalInputControl,{label:(0,l.__)("Closing ID"),help:(0,l.__)("Set a ID for the element. Note that multiple elements can share an same ID."),value:r,onChange:e=>i({pattern_friend_id:e})})),(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.Button,{variant:"secondary",onClick:()=>{i({pattern_friend_id:Math.random().toString(36)})}},"Generate Random ID")),!r&&(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.Notice,{status:"warning",isDismissible:!1},"A closing ID is required to make the element hidable."))))}function d(t){const{attributes:{pattern_friend_hidable_group_button:n,pattern_friend_hidable_group_button_hide_duration:r},setAttributes:i}=t;return(0,e.createElement)(a.PanelBody,{title:(0,l.__)("Hidable Settings")},(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.ToggleControl,{label:(0,l.__)("Assign As Hiding Button"),help:(0,l.__)("Mark this button as an element hiding button. Note that is has to be a child of an element marked as hidable."),checked:n,onChange:()=>i({pattern_friend_hidable_group_button:!n})})),n&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.__experimentalNumberControl,{label:(0,l.__)("Hide Duration (hours)"),help:(0,l.__)("Set the duration for the element to be hidden in hours."),value:r,onChange:e=>{(e=parseInt(e))<0&&(e="0"),i({pattern_friend_hidable_group_button_hide_duration:e})}})),"0"==r&&(0,e.createElement)(a.PanelRow,null,(0,e.createElement)(a.Notice,{status:"warning",isDismissible:!1},"A hide duration is required to make the element hidable."))))}(0,t.addFilter)("blocks.registerBlockType","wp-pattern-friend/modify-block-visibility-attributes",((e,t)=>("core/group"==t&&(e.attributes={...e.attributes,pattern_friend_hidable_group:{type:"boolean",default:!1},pattern_friend_id:{type:"string",default:""}}),"core/button"==t&&(e.attributes={...e.attributes,pattern_friend_hidable_group_button:{type:"boolean",default:!1},pattern_friend_hidable_group_button_hide_duration:{type:"number",default:0}}),e.attributes={...e.attributes,pattern_friend_hide_on_mobile:{type:"boolean",default:!1},pattern_friend_hide_on_tablet:{type:"boolean",default:!1},pattern_friend_hide_on_computer:{type:"boolean",default:!1}},e))),(0,t.addFilter)("editor.BlockEdit","wp-pattern-friend/add-device-visibility-controls",(0,r.createHigherOrderComponent)((t=>l=>{const{attributes:r}=l,{pattern_friend_hide_on_mobile:_,pattern_friend_hide_on_tablet:u,pattern_friend_hide_on_computer:c}=r;let s=(0,e.createElement)(t,{...l});if(_||u||c){let t=`\n\t\t\t\t\t${_?" pf-hide-on-mobile":""}\n\t\t\t\t\t${u?" pf-hide-on-tablet":""}\n\t\t\t\t\t${c?" pf-hide-on-desktop":""}\n\t\t\t\t\t`;s=(0,e.createElement)("div",{className:t},s)}return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(a.Panel,{header:"Pattern Friend"},(0,e.createElement)(i,{...l}),"core/group"==l.name&&(0,e.createElement)(o,{...l}),"core/button"==l.name&&(0,e.createElement)(d,{...l}))),s)})))})();