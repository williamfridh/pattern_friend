{"version":3,"file":"block-visibility.js","mappings":"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","sources":["webpack://pattern_friend/external window \"React\"","webpack://pattern_friend/external window [\"wp\",\"blockEditor\"]","webpack://pattern_friend/external window [\"wp\",\"components\"]","webpack://pattern_friend/external window [\"wp\",\"compose\"]","webpack://pattern_friend/external window [\"wp\",\"hooks\"]","webpack://pattern_friend/external window [\"wp\",\"i18n\"]","webpack://pattern_friend/webpack/bootstrap","webpack://pattern_friend/webpack/runtime/compat get default export","webpack://pattern_friend/webpack/runtime/define property getters","webpack://pattern_friend/webpack/runtime/hasOwnProperty shorthand","webpack://pattern_friend/webpack/runtime/make namespace object","webpack://pattern_friend/./src/block-visibility.js"],"sourcesContent":["module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { addFilter } from '@wordpress/hooks'\r\nimport { InspectorControls } from '@wordpress/block-editor'\r\nimport { Panel, PanelBody, ToggleControl, PanelRow } from '@wordpress/components'\r\nimport { __experimentalNumberControl as NumberControl } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n'\r\nimport { createHigherOrderComponent } from '@wordpress/compose'\r\nimport { Notice } from '@wordpress/components'\r\n\r\n// Add the new attributes to the supported blocks.\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'wp-pattern-friend/modify-block-visibility-attributes', (settings, name) => {\r\n\r\n\t\t// Add additional attributes to the core/group block.\r\n\t\tif (name == 'core/group')\r\n\t\t\tsettings.attributes = {\r\n\t\t\t\t...settings.attributes,\r\n\t\t\t\r\n\t\t\t\t'pf_hidable_group': {\r\n\t\t\t\t\ttype: 'boolean',\r\n\t\t\t\t\tdefault: false,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\t// Add additional attributes to the core/button block.\r\n\t\tif (name == 'core/button')\r\n\t\t\tsettings.attributes = {\r\n\t\t\t\t...settings.attributes,\r\n\t\t\t\t\r\n\t\t\t\t'pf_hidable_group_button': {\r\n\t\t\t\t\ttype: 'boolean',\r\n\t\t\t\t\tdefault: false,\r\n\t\t\t\t},\r\n\t\t\t\t'pf_hidable_group_button_hide_duration': {\r\n\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\tdefault: 24, // Set in hours\r\n\t\t\t\t},\r\n\t\t\t}\r\n\r\n\t\t// Add additional attributes to all blocks.\r\n\t\tsettings.attributes = {\r\n\t\t\t...settings.attributes,\r\n\r\n\t\t\t'pf_hide_on_mobile': {\r\n\t\t\t\ttype: 'boolean',\r\n\t\t\t\tdefault: false,\r\n\t\t\t},\r\n\t\t\t'pf_hide_on_tablet': {\r\n\t\t\t\ttype: 'boolean',\r\n\t\t\t\tdefault: false,\r\n\t\t\t},\r\n\t\t\t'pf_hide_on_computer': {\r\n\t\t\t\ttype: 'boolean',\r\n\t\t\t\tdefault: false,\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t\t// Return the modified settings.\r\n\t\treturn settings\r\n\t}\r\n)\r\n\r\n/**\r\n * Generate block device visibility form.\r\n */\r\nfunction VisibilityForm(props) {\r\n\tconst {\r\n\t\tattributes: {\r\n\t\t\t'pf_hide_on_mobile': pf_hide_on_mobile,\r\n\t\t\t'pf_hide_on_tablet': pf_hide_on_tablet,\r\n\t\t\t'pf_hide_on_computer': pf_hide_on_computer,\r\n\t\t},\r\n\t\tsetAttributes,\r\n\t} = props\r\n\r\n\treturn (\r\n\t\t\t\t<PanelBody title={__(\"Device Visibility\")}>\r\n\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\tlabel={__(\"Hide on mobile\")}\r\n\t\t\t\t\t\t\tchecked={ pf_hide_on_mobile }\r\n\t\t\t\t\t\t\tonChange={ () => setAttributes( { 'pf_hide_on_mobile': ! pf_hide_on_mobile } ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PanelRow>\r\n\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\tlabel={__(\"Hide on tablet\")}\r\n\t\t\t\t\t\t\tchecked={ pf_hide_on_tablet }\r\n\t\t\t\t\t\t\tonChange={ () => setAttributes( { 'pf_hide_on_tablet': ! pf_hide_on_tablet } ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PanelRow>\r\n\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\tlabel={__(\"Hide on computer\")}\r\n\t\t\t\t\t\t\tchecked={ pf_hide_on_computer }\r\n\t\t\t\t\t\t\tonChange={ () => setAttributes( { 'pf_hide_on_computer': ! pf_hide_on_computer } ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PanelRow>\r\n\t\t\t\t\t{pf_hide_on_mobile && pf_hide_on_tablet && pf_hide_on_computer && (\r\n\t\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t\t<Notice status=\"warning\" isDismissible={false}>You're hiding the block on all devices.</Notice>\r\n\t\t\t\t\t\t</PanelRow>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</PanelBody>\r\n\t)\r\n}\r\n\r\n/**\r\n * Generate form for group hidability.\r\n */\r\nfunction HidableGroupForm(props) {\r\n\tconst {\r\n\t\tattributes: {\r\n\t\t\t'pf_hidable': pf_hidable,\r\n\t\t},\r\n\t\tsetAttributes,\r\n\t} = props\r\n\r\n\treturn (\r\n\t\t\t\t<PanelBody title={__(\"Hidable Settings\")}>\r\n\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\tlabel={__(\"Make Group Hidable\")}\r\n\t\t\t\t\t\t\thelp={__(\"Make this group hidable (requires an child button marked as a group closing button).\")}\r\n\t\t\t\t\t\t\tchecked={ pf_hidable }\r\n\t\t\t\t\t\t\tonChange={ () => setAttributes( { 'pf_hidable': ! pf_hidable } ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PanelRow>\r\n\t\t\t\t</PanelBody>\r\n\t)\r\n}\r\n\r\n/**\r\n * Generate a form for group closing button.\r\n */\r\nfunction HidableGroupButtonForm(props) {\r\n\tconst {\r\n\t\tattributes: {\r\n\t\t\t'pf_hidable_group_button': pf_hidable_group_button,\r\n\t\t\t'pf_hidable_group_button_hide_duration': pf_hidable_group_button_hide_duration,\r\n\t\t},\r\n\t\tsetAttributes,\r\n\t} = props\r\n\r\n\treturn (\r\n\t\t\t\t<PanelBody title={__(\"Hidable Settings\")}>\r\n\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\tlabel={__(\"Assign As Hiding Button\")}\r\n\t\t\t\t\t\t\thelp={__(\"Mark this button as a group hiding button.\")}\r\n\t\t\t\t\t\t\tchecked={ pf_hidable_group_button }\r\n\t\t\t\t\t\t\tonChange={ () => setAttributes( { 'pf_hidable_group_button': ! pf_hidable_group_button } ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</PanelRow>\r\n\t\t\t\t\t{pf_hidable_group_button && (\r\n\t\t\t\t\t\t<PanelRow>\r\n\t\t\t\t\t\t\t<NumberControl\r\n\t\t\t\t\t\t\t\tlabel={__(\"Hide Duration (hours)\")}\r\n\t\t\t\t\t\t\t\thelp={__(\"Set the duration for the group to be hidden in hours.\")}\r\n\t\t\t\t\t\t\t\tvalue={pf_hidable_group_button_hide_duration}\r\n\t\t\t\t\t\t\t\tonChange={ (value) => setAttributes( { 'pf_hidable_group_button_hide_duration': value } ) }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</PanelRow>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</PanelBody>\r\n\t)\r\n}\r\n\r\n// Add the new attributes to the block edit component.\r\naddFilter(\r\n    'editor.BlockEdit',\r\n    'wp-pattern-friend/add-device-visibility-controls',\r\n    createHigherOrderComponent( BlockEdit => {\r\n        return props => {\r\n\r\n            // Get the current attributes\r\n            const { attributes } = props\r\n            const { pf_hide_on_mobile, pf_hide_on_tablet, pf_hide_on_computer } = attributes\r\n\r\n\t\t\tlet wrappedElement = <BlockEdit { ...props } />\r\n\t\t\tif (pf_hide_on_mobile || pf_hide_on_tablet || pf_hide_on_computer) {\r\n\t\t\t\tlet wrapperElementClasses = `\r\n\t\t\t\t\t${pf_hide_on_mobile ? ' pf-hide-on-mobile' : ''}\r\n\t\t\t\t\t${pf_hide_on_tablet ? ' pf-hide-on-tablet' : ''}\r\n\t\t\t\t\t${pf_hide_on_computer ? ' pf-hide-on-desktop' : ''}\r\n\t\t\t\t\t`\r\n\t\t\t\twrappedElement = <div className={wrapperElementClasses}>{wrappedElement}</div>\r\n\t\t\t}\r\n\r\n            // Render the block edit component\r\n            return(\r\n\t\t\t\t<>\r\n\t\t\t\t\t<InspectorControls>\r\n\t\t\t\t\t\t<Panel header=\"Pattern Friend\">\r\n\t\t\t\t\t\t\t<VisibilityForm { ...props } />\r\n\t\t\t\t\t\t\t{props.name == 'core/group' && <HidableGroupForm { ...props } />}\r\n\t\t\t\t\t\t\t{props.name == 'core/button' && <HidableGroupButtonForm { ...props } />}\r\n\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t</InspectorControls>\r\n\t\t\t\t\t{wrappedElement}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n        }\r\n    }),\r\n)"],"names":["addFilter","InspectorControls","Panel","PanelBody","ToggleControl","PanelRow","__experimentalNumberControl","NumberControl","__","createHigherOrderComponent","Notice","settings","name","attributes","type","default","VisibilityForm","props","pf_hide_on_mobile","pf_hide_on_tablet","pf_hide_on_computer","setAttributes","createElement","title","label","checked","onChange","status","isDismissible","HidableGroupForm","pf_hidable","help","HidableGroupButtonForm","pf_hidable_group_button","pf_hidable_group_button_hide_duration","value","BlockEdit","wrappedElement","wrapperElementClasses","className","Fragment","header"],"sourceRoot":""}